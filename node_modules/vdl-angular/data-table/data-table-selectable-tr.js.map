{"version":3,"file":"data-table-selectable-tr.js","sourceRoot":"","sources":["../../../src/lib/data-table/data-table-selectable-tr.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;OAAO,EACL,SAAS,EACT,MAAM,EACN,KAAK,EACL,YAAY,EACZ,MAAM,EACN,QAAQ,EACR,UAAU,EACV,UAAU,EAEX,MAAM,eAAe;OACf,yBAAyB;OACzB,uBAAuB;OACvB,EAAC,YAAY,EAAC,MAAM,cAAc;AAuBzC;IAQE,2CAEmB,KAAmB,EAAY,QAAoB;QAAnD,UAAK,GAAL,KAAK,CAAc;QAAY,aAAQ,GAAR,QAAQ,CAAY;QANtE,aAAQ,GACN,IAAI,YAAY,CAAqC,KAAK,CAAC,CAAC;QAC9D,aAAQ,GAAY,KAAK,CAAC;QAKxB,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;IACxB,CAAC;IAED;;OAEG;IACH,kDAAM,GAAN,UAAO,KAAU;QACf,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,8BAA8B,CAAC,CAAC,CAAC,CAAC;YACpE,KAAK,CAAC,cAAc,EAAE,CAAC;QACzB,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;QAE/B,IAAI,WAAW,GAAuC;YACpD,IAAI,EAAE,uBAAuB;YAC7B,MAAM,EAAE,IAAI;YACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,eAAe,EAAE,IAAI,CAAC,eAAe;SACtC,CAAC;QAEF,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAClC,CAAC;IAED,8DAAkB,GAAlB,cAAsB,CAAC;IAjCvB;QAAC,KAAK,CAAC,kBAAkB,CAAC;;8EAAA;IAE1B;QAAC,MAAM,EAAE;;uEAAA;IAKG;mBAAC,QAAQ,EAAE;mBACV,MAAM,CAAC,UAAU,CAAC,cAAM,OAAA,YAAY,EAAZ,CAAY,CAAC,CAAC;;yCAAA;IA0BrD,wCAAC;AAAD,CAAC,AAnCD,IAmCC;AAeD;IAAqD,mDAAiC;IACpF,yCAEmB,KAAmB,EAAY,QAAoB;QACpE,kBAAM,KAAK,EAAE,QAAQ,CAAC,CAAC;QADN,UAAK,GAAL,KAAK,CAAc;QAAY,aAAQ,GAAR,QAAQ,CAAY;IAEtE,CAAC;IAED,uDAAa,GAAb;QAAA,iBAIC;QAHC,IAAI,CAAC,KAAK,CAAC,kBAAkB;aAC1B,GAAG,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,WAAW,EAAjB,CAAiB,CAAC;aAC/B,SAAS,CAAC,UAAA,eAAe,IAAI,OAAA,KAAI,CAAC,QAAQ,GAAG,eAAe,EAA/B,CAA+B,CAAC,CAAC;IACnE,CAAC;IAED,4DAAkB,GAAlB;QACE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IA9BH;QAAC,SAAS,CAAC;YACT,QAAQ,EAAE,0CAA0C;YACpD,QAAQ,EAAE,wKAKP;YACH,IAAI,EAAE;gBACJ,gBAAgB,EAAE,UAAU;gBAC5B,SAAS,EAAE,gBAAgB;aAC5B;SACF,CAAC;mBAEa,QAAQ,EAAE;mBACV,MAAM,CAAC,UAAU,CAAC,cAAM,OAAA,YAAY,EAAZ,CAAY,CAAC,CAAC;;uCAHnD;IAmBF,sCAAC;AAAD,CAAC,AAlBD,CAAqD,iCAAiC,GAkBrF;AAeD;IAA+C,6CAAiC;IAC9E,mCAEmB,KAAmB,EAAY,QAAoB;QACpE,kBAAM,KAAK,EAAE,QAAQ,CAAC,CAAC;QADN,UAAK,GAAL,KAAK,CAAc;QAAY,aAAQ,GAAR,QAAQ,CAAY;IAEtE,CAAC;IAED;;;;OAIG;IACH,6CAAS,GAAT,UAAU,OAAY;QACpB,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC;IACvF,CAAC;IAED,iDAAa,GAAb;QAAA,iBAQC;QAPC,IAAI,CAAC,KAAK,CAAC,kBAAkB;aAC1B,GAAG,CAAC,UAAA,KAAK;YACR,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,SAAS;gBAC/B,KAAK,CAAC,MAAM,CAAC,MAAM;gBACnB,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,UAAC,KAAa,IAAK,OAAA,KAAK,KAAK,KAAI,CAAC,eAAe,EAA9B,CAA8B,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACvF,CAAC,CAAC;aACD,SAAS,CAAC,UAAA,eAAe,IAAI,OAAA,KAAI,CAAC,QAAQ,GAAG,eAAe,EAA/B,CAA+B,CAAC,CAAC;IACnE,CAAC;IAED,sDAAkB,GAAlB;QACE,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;QAC1C,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,KAAK,SAAS,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACjD,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC;IACH,CAAC;IAhDH;QAAC,SAAS,CAAC;YACT,QAAQ,EAAE,mCAAmC;YAC7C,QAAQ,EAAE,sKAKP;YACH,IAAI,EAAE;gBACJ,gBAAgB,EAAE,UAAU;gBAC5B,SAAS,EAAE,gBAAgB;aAC5B;SACF,CAAC;mBAEa,QAAQ,EAAE;mBACV,MAAM,CAAC,UAAU,CAAC,cAAM,OAAA,YAAY,EAAZ,CAAY,CAAC,CAAC;;iCAHnD;IAqCF,gCAAC;AAAD,CAAC,AApCD,CAA+C,iCAAiC,GAoC/E","sourcesContent":["import {\n  Component,\n  Output,\n  Input,\n  EventEmitter,\n  Inject,\n  Optional,\n  forwardRef,\n  ElementRef,\n  AfterContentInit\n} from '@angular/core';\nimport 'rxjs/add/operator/share';\nimport 'rxjs/add/operator/map';\nimport {VdlDataTable} from './data-table';\n\n/**\n * VdlDataTable row\n */\nexport interface ITableSelectableRow {\n  selectableValue: string;\n  onChange: EventEmitter<ITableSelectableRowSelectionChange>;\n  isActive: boolean;\n  change: (event: any) => void;\n  ngAfterContentInit: () => void;\n}\n\n/**\n * Selectable change event data\n */\nexport interface ITableSelectableRowSelectionChange {\n  name: string;\n  target: ITableSelectableRow;\n  isActive: boolean;\n  selectableValue: string;\n}\n\nexport abstract class AbstractVdlDataTableSelectableRow implements AfterContentInit, ITableSelectableRow {\n  @Input('selectable-value')\n  selectableValue: string;\n  @Output()\n  onChange: EventEmitter<ITableSelectableRowSelectionChange> =\n    new EventEmitter<ITableSelectableRowSelectionChange>(false);\n  isActive: boolean = false;\n\n  constructor(@Optional()\n              @Inject(forwardRef(() => VdlDataTable))\n              public table: VdlDataTable, protected _element: ElementRef) {\n    this.onChange.share();\n  }\n\n  /**\n   * Change active status\n   */\n  change(event: any) {\n    if (event.target.classList.contains('vdl-checkbox-inner-container')) {\n      event.preventDefault();\n    }\n\n    this.isActive = !this.isActive;\n\n    let changeEvent: ITableSelectableRowSelectionChange = {\n      name: 'selectable_row_change',\n      target: this,\n      isActive: this.isActive,\n      selectableValue: this.selectableValue\n    };\n\n    this.onChange.emit(changeEvent);\n  }\n\n  ngAfterContentInit() {}\n}\n\n@Component({\n  selector: 'tr[vdl-data-table-header-selectable-row]',\n  template: `\n        <th class=\"vdl-data-check-cell\">\n            <vdl-checkbox [checked]=\"isActive\"></vdl-checkbox>\n        </th>\n        <ng-content></ng-content>\n    `,\n  host: {\n    '[class.active]': 'isActive',\n    '(click)': 'change($event)'\n  }\n})\nexport class VdlDataTableHeaderSelectableRow extends AbstractVdlDataTableSelectableRow {\n  constructor(@Optional()\n              @Inject(forwardRef(() => VdlDataTable))\n              public table: VdlDataTable, protected _element: ElementRef) {\n    super(table, _element);\n  }\n\n  _bindListener(): void {\n    this.table.onSelectableChange\n      .map(event => event.allSelected)\n      .subscribe(newActiveStatus => this.isActive = newActiveStatus);\n  }\n\n  ngAfterContentInit() {\n    if (!!this.table) {\n      this._bindListener();\n    }\n  }\n}\n\n@Component({\n  selector: 'tr[vdl-data-table-selectable-row]',\n  template: `\n        <td class=\"vdl-data-check-cell\">\n          <vdl-checkbox [checked]=\"isActive\"></vdl-checkbox>\n        </td>\n        <ng-content></ng-content>\n    `,\n  host: {\n    '[class.active]': 'isActive',\n    '(click)': 'change($event)'\n  }\n})\nexport class VdlDataTableSelectableRow extends AbstractVdlDataTableSelectableRow {\n  constructor(@Optional()\n              @Inject(forwardRef(() => VdlDataTable))\n              public table: VdlDataTable, protected _element: ElementRef) {\n    super(table, _element);\n  }\n\n  /**\n   * @param {any} element\n   *\n   * @returns {string}\n   */\n  _getIndex(element: any): string {\n    return Array.prototype.indexOf.call(element.parentNode.children, element).toString();\n  }\n\n  _bindListener(): void {\n    this.table.onSelectableChange\n      .map(event => {\n        return event.values !== undefined &&\n          event.values.length &&\n          (event.values.findIndex((value: string) => value === this.selectableValue)) !== -1;\n      })\n      .subscribe(newActiveStatus => this.isActive = newActiveStatus);\n  }\n\n  ngAfterContentInit() {\n    let element = this._element.nativeElement;\n    if (this.selectableValue === undefined) {\n      this.selectableValue = this._getIndex(element);\n    }\n\n    if (!!this.table) {\n      this._bindListener();\n    }\n  }\n}\n"]}