@import '../core/style/variables';
@import '../core/style/list-common';
@import '../core/theming/vdlPalette';

$vdl-list-side-padding: 15px;
$vdl-list-avatar-size: 30px;
$vdl-list-icon-size: 20px;

// Normal list variables
$vdl-list-top-padding: 15px;
$vdl-list-font-size: 16px;
$vdl-list-secondary-font: 14px;
// height for single-line lists
$vdl-list-base-height: 50px;
// height for single-line lists with avatars
$vdl-list-avatar-height: 60px;
// spec requires two line height
$vdl-list-two-line-height: 60px;

// Dense list variables
$vdl-dense-font-size: 12px;
$vdl-dense-base-height: 40px;
$vdl-dense-avatar-height: 50px;
$vdl-dense-two-line-height: 50px;

// This mixin provides all list-item styles, changing font size and height
// based on whether the list is in dense mode.
@mixin vdl-list-item-base($font-size, $base-height, $avatar-height, $two-line-height) {
  // Prevents the wrapper `vdl-list-item` from collapsing due to it being `inline` by default.
  display: block;

  .vdl-list-item {
    display: flex;
    flex-direction: row;
    align-items: center;
    font-family: $vdl-font-family;
    box-sizing: border-box;
    font-size: $font-size;
    height: $base-height;
    padding: 0 $vdl-list-side-padding;
    background-color: vdl-color(1);
    position: relative;

    vdl-list-item-action {
      position: absolute;
      display: flex;
      right: 0;
      top: 0;
      bottom: 0;
      align-items: center;

      [dir='rtl'] & {
        left: 0;
        right: inherit;
      }
    }

    &.vdl-list-item-focus {
      vdl-list-item-action {
        background-color: vdl-color(1);
      }
    }

    &:hover {
      background-color: vdl-color(2);

      vdl-list-item-action {
        background-color: vdl-color(2);
      }
    }
  }

  .vdl-list-item.vdl-list-item-select {
    border-left: 3px solid transparent;

    [dir='rtl'] & {
      border-right: 3px solid transparent;
      border-left: none;
    }

    padding-left: 12px;
    cursor: pointer;
  }

  .vdl-list-item.vdl-list-item-focus.vdl-list-item-select {
    background-color: vdl-color(8);
    border-left: 3px solid vdl-color(10);

    [dir='rtl'] & {
      border-right: 3px solid vdl-color(10);
      border-left: none;
    }

    vdl-list-item-action {
      background-color: vdl-color(8);
    }

    button[vdl-icon-button] {
      padding: 0 15px;
      font-size: rem(2);
      display: inline-block;

      &:last-child {
        padding-right: 15px;

        [dir='rtl'] & {
          padding-left: 15px;
        }
      }
    }

    &.vdl-list-item-select:hover {
      background-color: vdl-color(9);

      vdl-list-item-action {
        background-color: vdl-color(9);
      }
    }
  }

  &.vdl-list-avatar .vdl-list-item {
    height: $avatar-height;
  }

  &.vdl-2-line .vdl-list-item {
    height: $two-line-height;

    [vdl-line] {
      &:first-child {
        padding-bottom: 6px;
      }
    }
  }

  .vdl-list-item.vdl-list-item-inline {
    height: $base-height;
  }

  .vdl-list-text-inline {
    @include vdl-normalize-text();

    display: flex;
    flex-direction: row;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;
    padding-left: 20px;

    [dir='rtl'] & {
      padding-right: 20px;
    }

    // Must remove wrapper when lines are empty or it takes up horizontal
    // space and pushes other elements to the right.
    &:empty {
      display: none;
    }

    &:first-child {
      padding: 0;
    }

    [vdl-line] {
      font-family: $vdl-font-family;
      width: 40%;
      line-height: rem(2);
      font-size: rem(1.6);

      &:last-child {
        width: 60%;
        font-size: rem(1.4);
      }

      &:only-child {
        width: 100%;
        font-size: rem(1.6);
        font-family: $vdl-font-family;
      }

      &:nth-child(n+2) {
        font-family: $vdl-font-family-light;
      }
    }

    &.vdl-list-wrap-text [vdl-line] {
      white-space: normal;
      overflow: visible;
      text-overflow: clip;
    }
  }

  .vdl-list-text {
    @include vdl-normalize-text();

    display: flex;
    flex-direction: column;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;
    padding-left: 20px;

    [dir='rtl'] & {
      padding-right: 20px;
    }

    // Must remove wrapper when lines are empty or it takes up horizontal
    // space and pushes other elements to the right.
    &:empty {
      display: none;
    }

    [vdl-line] {
      &:last-child {
        font-family: $vdl-font-family-light;
      }
    }

    &:first-child {
      padding: 0;
    }

    &.vdl-list-wrap-text [vdl-line] {
      white-space: normal;
      overflow: visible;
      text-overflow: clip;
    }
  }

  [vdl-list-avatar] {
    flex-shrink: 0;
    width: $vdl-list-avatar-size;
    height: $vdl-list-avatar-size;
    border-radius: 50%;
  }

  [vdl-list-icon] {
    width: $vdl-list-icon-size;
    height: $vdl-list-icon-size;
    font-size: $vdl-list-icon-size;
    cursor: pointer;
  }
}

vdl-list, vdl-nav-list {
  display: block;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.25);

  vdl-list-item, a[vdl-list-item] {
    @include vdl-list-item-base(
        $vdl-list-font-size,
        $vdl-list-base-height,
        $vdl-list-avatar-height,
        $vdl-list-two-line-height
    );

    &:not(:last-child) {
      border-bottom: 1px solid vdl-color(4);
    }

    @include vdl-line-base($vdl-list-secondary-font);

    button[vdl-icon-button] {
      display: none;
    }

    &.vdl-disabled {
      color: vdl-color(6);

      [vdl-list-avatar] {
        opacity: 0.5;
      }

      &:focus {
        outline: none;
      }
    }

    &:focus {
      outline-offset: -2px;
      outline-width: 0.5px;
      outline-style: auto;
      outline-color: vdl-color(11);
    }

    &:hover,
    &.hover,
    &:focus,
    &.focus {
      vdl-list-item-action {
        background-color: vdl-color(1);
      }

      button[vdl-icon-button] {
        padding: 0 15px;
        font-size: rem(2);
        display: inline-block;

        &:last-child {
          padding-right: 15px;

          [dir='rtl'] & {
            padding-left: 15px;
          }
        }

        [dir='rtl'] & {
          text-align: right;
        }

        &.vdl-button-focus {
          color: vdl-color(11);
        }
      }
    }
  }
}

vdl-list[dense], vdl-nav-list[dense] {
  display: block;

  vdl-list-item, a[vdl-list-item] {
    @include vdl-list-item-base(
        $vdl-dense-font-size,
        $vdl-dense-base-height,
        $vdl-dense-avatar-height,
        $vdl-dense-two-line-height
    );

    @include vdl-line-base($vdl-list-secondary-font);

    &:focus {
      outline-offset: -2px;
      outline-width: 0.5px;
      outline-style: auto;
      outline-color: vdl-color(11);
    }
  }
}

vdl-divider {
  display: block;
  border-top-style: solid;
  border-top-width: 1px;
  margin: 0;
}

vdl-nav-list {
  a {
    text-decoration: none;
    color: inherit;
  }

  .vdl-list-item {
    cursor: pointer;

    &:hover, &.vdl-list-item-focus {
      outline: none;
    }
  }
}
