{"version":3,"file":"tab-group.js","sourceRoot":"","sources":["../../../src/lib/tabs/tab-group.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  NgModule,\n  ModuleWithProviders,\n  ViewChild,\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  QueryList,\n  ContentChildren,\n  ElementRef,\n  Renderer\n} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {\n  PortalModule,\n  coerceBooleanProperty\n} from '../core';\nimport {VdlTabLabel} from './tab-label';\nimport {VdlTabLabelWrapper} from './tab-label-wrapper';\nimport {VdlTabNavBar, VdlTabLink} from './tab-nav-bar/tab-nav-bar';\nimport {VdlInkBar} from './ink-bar';\nimport {Observable} from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport {ObserveContentModule} from '../core/observe-content/observe-content';\nimport {VdlTab} from './tab';\nimport {VdlTabBody} from './tab-body';\nimport {VIEWPORT_RULER_PROVIDER} from '../core/overlay/position/viewport-ruler';\nimport {VdlTabHeader} from './tab-header';\nimport {SCROLL_DISPATCHER_PROVIDER} from '../core/overlay/scroll/scroll-dispatcher';\n\n\n/** Used to generate unique ID's for each tab component */\nlet nextId = 0;\n\n/** A simple change event emitted on focus or selection changes. */\nexport class VdlTabChangeEvent {\n  index: number;\n  tab: VdlTab;\n}\n\n/** Possible positions for the tab header. */\nexport type VdlTabHeaderPosition = 'above' | 'below';\n\n/**\n * Material design tab-group component.  Supports basic tab pairs (label + content) and includes\n * animated ink-bar, keyboard navigation, and screen reader.\n * See: https://www.google.com/design/spec/components/tabs.html\n */\n@Component({\n  moduleId: module.id,\n  selector: 'vdl-tab-group',\n  templateUrl: 'tab-group.html',\n  styleUrls: ['tab-group.css'],\n  host: {\n    '[class.vdl-tab-group-dynamic-height]': 'dynamicHeight',\n    '[class.vdl-tab-group-inverted-header]': 'headerPosition === \"below\"',\n  }\n})\nexport class VdlTabGroup {\n  @ContentChildren(VdlTab) _tabs: QueryList<VdlTab>;\n\n  @ViewChild('tabBodyWrapper') _tabBodyWrapper: ElementRef;\n\n  /** Whether this component has been initialized. */\n  private _isInitialized: boolean = false;\n\n  /** The tab index that should be selected after the content has been checked. */\n  private _indexToSelect = 0;\n\n  /** Snapshot of the height of the tab body wrapper before another tab is activated. */\n  private _tabBodyWrapperHeight: number = null;\n\n  /** Whether the tab group should grow to the size of the active tab */\n  private _dynamicHeight: boolean = false;\n  @Input()\n  get dynamicHeight(): boolean { return this._dynamicHeight; }\n  set dynamicHeight(value: boolean) { this._dynamicHeight = coerceBooleanProperty(value); }\n\n  /** @deprecated */\n  @Input('vdl-dynamic-height')\n  get _dynamicHeightDeprecated(): boolean { return this._dynamicHeight; }\n  set _dynamicHeightDeprecated(value: boolean) { this._dynamicHeight = value; }\n\n  private _selectedIndex: number = null;\n\n  /** The index of the active tab. */\n  @Input()\n  set selectedIndex(value: number) { this._indexToSelect = value; }\n  get selectedIndex(): number { return this._selectedIndex; }\n\n  /** Position of the tab header. */\n  @Input()\n  headerPosition: VdlTabHeaderPosition = 'above';\n\n  /** Output to enable support for two-way binding on `selectedIndex`. */\n  @Output() get selectedIndexChange(): Observable<number> {\n    return this.selectChange.map(event => event.index);\n  }\n\n  private _onFocusChange: EventEmitter<VdlTabChangeEvent> = new EventEmitter<VdlTabChangeEvent>();\n\n  /** Event emitted when focus has changed within a tab group. */\n  @Output() get focusChange(): Observable<VdlTabChangeEvent> {\n    return this._onFocusChange.asObservable();\n  }\n\n  private _onSelectChange: EventEmitter<VdlTabChangeEvent> =\n      new EventEmitter<VdlTabChangeEvent>(true);\n\n  /** Event emitted when the tab selection has changed. */\n  @Output() get selectChange(): Observable<VdlTabChangeEvent> {\n    return this._onSelectChange.asObservable();\n  }\n\n  private _groupId: number;\n\n  constructor(private _renderer: Renderer) {\n    this._groupId = nextId++;\n  }\n\n  /**\n   * After the content is checked, this component knows what tabs have been defined\n   * and what the selected index should be. This is where we can know exactly what position\n   * each tab should be in according to the new selected index, and additionally we know how\n   * a new selected tab should transition in (from the left or right).\n   */\n  ngAfterContentChecked(): void {\n    // Clamp the next selected index to the bounds of 0 and the tabs length. Note the `|| 0`, which\n    // ensures that values like NaN can't get through and which would otherwise throw the\n    // component into an infinite loop (since Math.max(NaN, 0) === NaN).\n    this._indexToSelect =\n        Math.min(this._tabs.length - 1, Math.max(this._indexToSelect || 0, 0));\n\n    // If there is a change in selected index, emit a change event. Should not trigger if\n    // the selected index has not yet been initialized.\n    if (this._selectedIndex != this._indexToSelect && this._selectedIndex != null) {\n      this._onSelectChange.emit(this._createChangeEvent(this._indexToSelect));\n    }\n\n    // Setup the position for each tab and optionally setup an origin on the next selected tab.\n    this._tabs.forEach((tab: VdlTab, index: number) => {\n      tab.position = index - this._indexToSelect;\n\n      // If there is already a selected tab, then set up an origin for the next selected tab\n      // if it doesn't have one already.\n      if (this._selectedIndex != null && tab.position == 0 && !tab.origin) {\n        tab.origin = this._indexToSelect - this._selectedIndex;\n      }\n    });\n\n    this._selectedIndex = this._indexToSelect;\n  }\n\n  /**\n   * Waits one frame for the view to update, then updates the ink bar\n   * Note: This must be run outside of the zone or it will create an infinite change detection loop.\n   */\n  ngAfterViewChecked(): void {\n    this._isInitialized = true;\n  }\n\n  _focusChanged(index: number) {\n    this._onFocusChange.emit(this._createChangeEvent(index));\n  }\n\n  private _createChangeEvent(index: number): VdlTabChangeEvent {\n    const event = new VdlTabChangeEvent;\n    event.index = index;\n    if (this._tabs && this._tabs.length) {\n      event.tab = this._tabs.toArray()[index];\n    }\n    return event;\n  }\n\n  /** Returns a unique id for each tab label element */\n  _getTabLabelId(i: number): string {\n    return `vdl-tab-label-${this._groupId}-${i}`;\n  }\n\n  /** Returns a unique id for each tab content element */\n  _getTabContentId(i: number): string {\n    return `vdl-tab-content-${this._groupId}-${i}`;\n  }\n\n  /**\n   * Sets the height of the body wrapper to the height of the activating tab if dynamic\n   * height property is true.\n   */\n  _setTabBodyWrapperHeight(tabHeight: number): void {\n    if (!this._dynamicHeight || !this._tabBodyWrapperHeight) { return; }\n\n    this._renderer.setElementStyle(this._tabBodyWrapper.nativeElement, 'height',\n        this._tabBodyWrapperHeight + 'px');\n\n    // This conditional forces the browser to paint the height so that\n    // the animation to the new height can have an origin.\n    if (this._tabBodyWrapper.nativeElement.offsetHeight) {\n      this._renderer.setElementStyle(this._tabBodyWrapper.nativeElement, 'height',\n          tabHeight + 'px');\n    }\n  }\n\n  /** Removes the height of the tab body wrapper. */\n  _removeTabBodyWrapperHeight(): void {\n    this._tabBodyWrapperHeight = this._tabBodyWrapper.nativeElement.clientHeight;\n    this._renderer.setElementStyle(this._tabBodyWrapper.nativeElement, 'height', '');\n  }\n}\n\n@NgModule({\n  imports: [CommonModule, PortalModule, ObserveContentModule],\n  // Don't export all components because some are only to be used internally.\n  exports: [VdlTabGroup, VdlTabLabel, VdlTab, VdlTabNavBar, VdlTabLink],\n  declarations: [VdlTabGroup, VdlTabLabel, VdlTab, VdlInkBar, VdlTabLabelWrapper,\n    VdlTabNavBar, VdlTabLink, VdlTabBody, VdlTabHeader],\n  providers: [VIEWPORT_RULER_PROVIDER, SCROLL_DISPATCHER_PROVIDER],\n})\nexport class VdlTabsModule {\n  /** @deprecated */\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: VdlTabsModule,\n      providers: []\n    };\n  }\n}\n"]}