# vdl-menu

`vdl-menu` is a list of options that displays when triggered.  You can read more about menus in the
[Material Design spec](https://material.google.com/components/menus.html).

### Not yet implemented

- `prevent-close` option, to turn off automatic menu close when clicking outside the menu
- Custom offset support
- Menu groupings (which menus are allowed to open together)

## Usage

### Simple menu

In your template, create an `vdl-menu` element. You can use either `<button>` or `<anchor>` tags for
your menu items, as long as each is tagged with an `vdl-menu-item` attribute. Note that you can
disable items by adding the `disabled` boolean attribute or binding to it.

*my-comp.html*
```html
<!-- this menu starts as hidden by default -->
<vdl-menu>
    <button vdl-menu-item> Refresh </button>
    <button vdl-menu-item> Settings </button>
    <button vdl-menu-item> Help </button>
    <button vdl-menu-item disabled> Sign Out </button>
</vdl-menu>
```

Menus are hidden by default, so you'll want to connect up a menu trigger that can open your menu.
You can do so by adding a button tag with an `vdlMenuTriggerFor` attribute and passing in the menu
instance.  You can create a local reference to your menu instance by adding `#menu="vdlMenu"` to
your menu element.

*my-comp.html*
```html
<!-- menu opens when trigger button is clicked -->
<button vdl-icon-button [vdlMenuTriggerFor]="menu">
   <vdl-icon>more_vert</vdl-icon>
</button>

<vdl-menu #menu="vdlMenu">
    <button vdl-menu-item> Refresh </button>
    <button vdl-menu-item> Settings </button>
    <button vdl-menu-item> Help </button>
    <button vdl-menu-item disabled> Sign Out </button>
</vdl-menu>
```

Output:

<img src="https://material.angularjs.org/material2_assets/menu/default_closed.png">
<img src="https://material.angularjs.org/material2_assets/menu/default_open.png">

### Toggling the menu programmatically

You can also use the menu's API to open or close the menu programmatically from your class. Please
note that in this case, an `vdlMenuTriggerFor` attribute is still necessary to connect
the menu to its trigger element in the DOM.

*my-comp.component.ts*
```ts
class MyComp {
  @ViewChild(VdlMenuTrigger) trigger: VdlMenuTrigger;

  someMethod() {
    this.trigger.openMenu();
  }
}
```

*my-comp.html*
```html
<button vdl-icon-button [vdlMenuTriggerFor]="menu">
   <vdl-icon>more_vert</vdl-icon>
</button>

<vdl-menu #menu="vdlMenu">
    <button vdl-menu-item> Refresh </button>
    <button vdl-menu-item> Settings </button>
    <button vdl-menu-item> Help </button>
    <button vdl-menu-item disabled> Sign Out </button>
</vdl-menu>
```

### Adding an icon

Menus also support displaying `vdl-icon` elements before the menu item text.

*my-comp.html*
```html
<vdl-menu #menu="vdlMenu">
  <button vdl-menu-item>
    <vdl-icon> dialpad </vdl-icon>
    <span> Redial </span>
  </button>
  <button vdl-menu-item disabled>
    <vdl-icon> voicemail </vdl-icon>
    <span> Check voicemail </span>
  </button>
  <button vdl-menu-item>
    <vdl-icon> notifications_off </vdl-icon>
    <span> Disable alerts </span>
  </button>
</vdl-menu>
```

Output:

<img src="https://material.angularjs.org/material2_assets/menu/icon_menu_closed.png">
<img src="https://material.angularjs.org/material2_assets/menu/icon_menu_open.png">


### Customizing menu position

By default, the menu will display after and below its trigger.  You can change this display position
using the `x-position` (`before | after`) and `y-position` (`above | below`) attributes. The menu
can be positioned over the menu button or outside using `overlapTrigger` (`true | false`).

*my-comp.html*
```html
<vdl-menu x-position="before" #menu="vdlMenu">
    <button vdl-menu-item> Refresh </button>
    <button vdl-menu-item> Settings </button>
    <button vdl-menu-item> Help </button>
    <button vdl-menu-item disabled> Sign Out </button>
</vdl-menu>
```

Output:

<img src="https://material.angularjs.org/material2_assets/menu/before_closed.png">
<img src="https://material.angularjs.org/material2_assets/menu/before_open.png">

### Accessibility

The menu adds `role="menu"` to the main menu element and `role="menuitem"` to each menu item. It
also adds `aria-hasPopup="true"` to the trigger element.

#### Keyboard events:
- <kbd>DOWN_ARROW</kbd>: Focus next menu item
- <kbd>UP_ARROW</kbd>: Focus previous menu item
- <kbd>ENTER</kbd>: Select focused item

### Menu attributes

| Signature | Values | Description |
| --- | --- | --- |
| `x-position` | `before | after` | The horizontal position of the menu in relation to the trigger. Defaults to `after`. |
| `y-position` | `above | below` | The vertical position of the menu in relation to the trigger. Defaults to `below`. |
| `overlapTrigger` | `true | false` | Whether to have the menu show on top of the menu trigger or outside. Defaults to `true`. |

### Trigger Programmatic API

**Properties**

| Name | Type | Description |
| --- | --- | --- |
| `menuOpen` | `Boolean` | Property that is true when the menu is open. It is not settable (use methods below). |
| `onMenuOpen` | `Observable<void>` | Observable that emits when the menu opens. |
| `onMenuClose` | `Observable<void>` | Observable that emits when the menu closes. |

**Methods**

| Method | Returns | Description |
| --- | --- | --- |
| `openMenu()` | `Promise<void>` | Opens the menu. Returns a promise that will resolve when the menu has opened. |
| `closeMenu()` | `Promise<void>` | Closes the menu. Returns a promise that will resolve when the menu has closed. |
| `toggleMenu()` | `Promise<void>` | Toggles the menu. Returns a promise that will resolve when the menu has completed opening or closing. |
| `destroyMenu()` | `Promise<void>` | Destroys the menu overlay completely.


