{"version":3,"file":"sidenav-list.js","sourceRoot":"","sources":["../../../src/lib/sidenav/sidenav-list.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  NgModule,\n  ModuleWithProviders,\n  Component,\n  ElementRef,\n  Input,\n  Output,\n  ChangeDetectionStrategy,\n  EventEmitter,\n  Renderer,\n  ViewEncapsulation, ViewChild,\n} from '@angular/core';\n\nimport {CommonModule} from '@angular/common';\nimport {A11yModule} from '../core/a11y/index';\nimport {ENTER} from '../core/keyboard/keycodes';\nimport {OverlayModule} from '../core/overlay/overlay-directives';\nimport {VdlIconRegistry, VdlIconModule} from '../icon/index';\nimport {VdlButtonModule, VdlButton} from '../button/button';\nimport {VdlToolbarModule} from '../toolbar/toolbar';\n\nexport interface Category {\n  id?: number;\n  displayName: string;\n  icon: string;\n  route?: string;\n  expanded?: boolean;\n  subCategories?: Array<Category>;\n}\n\n@Component({\n  moduleId: module.id,\n  selector: 'vdl-sidenav-list-item',\n  templateUrl: 'sidenav-list-item.html',\n  styleUrls: ['sidenav-list.css'],\n  host: {\n    '[class.vdl-sidenav-list-item]': 'true',\n    'role': 'listitem',\n    '[tabindex]': '1',\n    '[class.vdl-sidenav-list-item-focus]': '_isKeyboardFocused',\n    '(keydown)': '_handleKeydown($event)',\n    '(mousedown)': '_setMousedown()',\n    '(focus)': '_setKeyboardFocus()',\n    '(blur)': '_removeKeyboardFocus()',\n  },\n  viewProviders: [VdlIconRegistry],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class VdlSidenavListItem {\n  @Input() category: Category;\n  @Output() expand = new EventEmitter();\n\n  /** Whether the sidenav-list-item has focus from the keyboard (not the mouse). Used for class binding. */\n  _isKeyboardFocused: boolean = false;\n\n  /** Whether a mousedown has occurred on this element in the last 100ms. */\n  _isMouseDown: boolean = false;\n\n  constructor(private _elementRef: ElementRef, private _renderer: Renderer, vdlIconRegistry: VdlIconRegistry) {\n    vdlIconRegistry.registerFontClassAlias('fontawesome', 'fa');\n  }\n\n  isExpandable(category: Category) { // show the caret icon?\n    return !!category.subCategories && category.subCategories.length > 0;\n  }\n\n  isExpanded(category: Category) { // show the subcategory list?\n    return this.isExpandable(category) && category.expanded;\n  }\n\n  _setMousedown() {\n    // We only *show* the focus style when focus has come to the sidenav-list-itme via the keyboard.\n    // The Material Design spec is silent on this topic, and without doing this, the\n    // sidenav-list-itme continues to look :active after clicking.\n    // @see http://marcysutton.com/button-focus-hell/\n    this._isMouseDown = true;\n    setTimeout(() => { this._isMouseDown = false; }, 100);\n  }\n\n  /** Focuses the sidenav-list-itme. */\n  focus(): void {\n    this._renderer.invokeElementMethod(this._getHostElement(), 'focus');\n  }\n\n  _handleKeydown(event: KeyboardEvent) {\n    if (ENTER === event.keyCode && event.target == this._elementRef.nativeElement) {\n      this._elementRef.nativeElement.click();\n    }\n  }\n\n  _setKeyboardFocus() {\n    this._isKeyboardFocused = !this._isMouseDown;\n  }\n\n  _removeKeyboardFocus() {\n    this._isKeyboardFocused = false;\n  }\n\n  _getHostElement() {\n    return this._elementRef.nativeElement;\n  }\n\n}\n\n@Component({\n  moduleId: module.id,\n  selector: 'vdl-sidenav-list',\n  templateUrl: 'sidenav-list.html',\n  styleUrls: ['sidenav-list.css'],\n  host: {\n    // 'role': 'list', // todo(dhm): the list role is inside the template should probably have a container\n    '[class.vdl-sidenav-list]': 'true',\n    '[class.vdl-sidenav-list-collapse]': '!_opened'\n  },\n  viewProviders: [VdlIconRegistry],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class VdlSidenavList {\n\n  @Input('selectedCategory') selectedCategory: Category;\n  @Input('categoryList') categoryList: Array<Category>;\n  @Output() onCategorySelect = new EventEmitter();\n  // @Output() onCategoryToggle = new EventEmitter();\n\n  _opened: boolean = true;\n  _pinned: boolean = false;\n\n  @ViewChild('openCloseButton')\n  public openCloseButton: VdlButton;\n\n  constructor(vdlIconRegistry: VdlIconRegistry) {\n    vdlIconRegistry.registerFontClassAlias('fontawesome', 'fa');\n  }\n\n  toggleOpened() {\n    if (!this._pinned) {\n      this._opened = !this._opened;\n    }\n  }\n\n  togglePinned() {\n    this._pinned = !this._pinned;\n    this.openCloseButton.disabled = this._pinned;\n  }\n\n  itemClicked(category: Category) {\n    if (this.isExpandable(category)) {\n      category.expanded = !category.expanded;\n      return; // we handle these clicks\n    }\n    this.onCategorySelect.emit(category);\n  }\n\n  isExpanded(category: Category) { // show the subcategory list?\n    return this.isExpandable(category) && category.expanded;\n  }\n\n  isExpandable(category: Category) { // show the caret icon?\n    return !!category.subCategories && category.subCategories.length > 0;\n  }\n\n  isSelected(category: Category) {\n    return this.selectedCategory === category;\n  }\n\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    A11yModule,\n    OverlayModule,\n    VdlButtonModule,\n    VdlIconModule,\n    VdlToolbarModule,\n  ],\n  exports: [\n    VdlSidenavList,\n    VdlSidenavListItem,\n  ],\n  declarations: [\n    VdlSidenavList,\n    VdlSidenavListItem,\n  ],\n})\nexport class VdlSidenavListModule {\n  /** @deprecated */\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: VdlSidenavListModule,\n      providers: []\n    };\n  }\n}\n"]}